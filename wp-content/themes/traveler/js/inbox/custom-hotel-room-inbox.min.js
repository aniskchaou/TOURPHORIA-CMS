jQuery(document).ready(function(t){function a(a,d,l){post_id=t(l).data("post-id"),t(".date-overlay").addClass("open");var r={room_id:post_id,month:a,year:d,security:st_params.st_search_nonce,action:"st_get_disable_date_hotel"};t.post(st_params.ajax_url,r,function(a){if(n=Object.keys(a.disable).map(function(t){return a.disable[t]}),s=Object.keys(a.fist_half_day).map(function(t){return a.fist_half_day[t]}),o=Object.keys(a.last_half_day).map(function(t){return a.last_half_day[t]}),s.length>0)for(d=0;d<s.length;d++){l="st_calendar_"+s[d];t("."+l).addClass("st_fist_half_day")}if(o.length>0)for(d=0;d<o.length;d++){l="st_calendar_"+o[d];t("."+l).addClass("st_last_half_day")}if(n.length>0)for(var d=0;d<n.length;d++){var l="st_calendar_"+n[d];t("."+l).addClass("disabled disabled-date booked day st_booked")}t(".date-overlay").removeClass("open"),e.removeClass("loading")},"json")}var e=t(".st-inbox-form-book"),n=[],s=[],o=[],d=t("input.checkin_hotel, input.checkout_hotel"),l=t(".input-daterange").data("period");l||(l="today"),d.length&&(d.each(function(){var a=t(this);a.datepicker({language:st_params.locale,format:t("[data-date-format]").data("date-format"),todayHighlight:!0,autoclose:!0,startDate:l,weekStart:1,setRefresh:!0,beforeShowDay:function(t){var a=t,e=a.getDate();e<10&&(e="0"+e);var n=a.getMonth()+1;n<10&&(n="0"+n);return{classes:"st_calendar_"+e+"_"+n+"_"+a.getFullYear()}}}),a.click(function(){if(s.length>0)for(a=0;a<s.length;a++){e="st_calendar_"+s[a];t("."+e).addClass("st_fist_half_day")}if(o.length>0)for(a=0;a<o.length;a++){e="st_calendar_"+o[a];t("."+e).addClass("st_last_half_day")}if(n.length>0)for(var a=0;a<n.length;a++){var e="st_calendar_"+n[a];t("."+e).addClass("disabled disabled-date booked day st_booked")}}),t(".date-overlay").addClass("open");var e=t(this).datepicker("getDate");null==e&&(e=new Date),year_start=e.getFullYear(),month_start=e.getMonth()+1}),a(month_start,year_start,d)),t("input.checkin_hotel").on("changeMonth",function(e){year_start=new Date(e.date).getFullYear(),month_start=new Date(e.date).getMonth()+1,a(month_start,year_start,t(this))}),t("input.checkin_hotel").on("changeDate",function(a){var e=a.date;e.setDate(e.getDate()+1),t("input.checkout_hotel").datepicker("setStartDate",e)}),t("input.checkin_hotel, input.checkout_hotel").on("keyup",function(a){setTimeout(function(){if(s.length>0)for(a=0;a<s.length;a++){e="st_calendar_"+s[a];t("."+e).addClass("st_fist_half_day")}if(o.length>0)for(a=0;a<o.length;a++){e="st_calendar_"+o[a];t("."+e).addClass("st_last_half_day")}if(n.length>0)for(var a=0;a<n.length;a++){var e="st_calendar_"+n[a];t("."+e).addClass("disabled disabled-date booked day st_booked")}},200)}),t("input.checkout_hotel").on("changeMonth",function(e){year_start=new Date(e.date).getFullYear(),month_start=new Date(e.date).getMonth()+1,a(month_start,year_start,t(this))})});