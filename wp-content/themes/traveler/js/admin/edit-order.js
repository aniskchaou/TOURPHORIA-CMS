jQuery(document).ready(function($){var item_type=$('#item_type').val();var post_type;$('#check_in').datepicker({dateFormat:'yy-mm-dd',firstDay:1});$('#check_out').datepicker({"dateFormat":'yy-mm-dd',firstDay:1});$('#item_type').change(function(){item_type=$('#item_type').val();$('.form_row_spec').hide();$('.form_row_spec.'+item_type).show();switch(item_type){case "hotel":$('label[for=item_id2]').html('Room');break}});$('#item_type').trigger('change');$('.st_add_order_item').click(function(){$('.st_create_item_wrap').removeClass('hidden')});function get_post_type()
{switch(item_type){case "hotel":return "hotel_room";break}}
var on_ajax_load=!1;$('.st_save_new_item').click(function(){var me=$(this);var next=me.next('.loading');if(on_ajax_load)return;$(this).next('.loading').remove();$(this).after('<span class="loading">Saving...</span>');on_ajax_load=!0;var data=$('.st_create_item').find('input,textarea,select').serializeArray();$.ajax({dataType:'json',url:ajaxurl,data:data,success:function(res){if(typeof res.message=="undefined"&&res.message){alert(res.message)}
if(res.reload)window.location.reload();me.next('.loading').remove();on_ajax_load=!1},error:function(res){alert('Ajax Fail');console.log(res);me.next('.loading').remove();on_ajax_load=!1}})});$('#item_id').select2({minimumInputLength:2,ajax:{url:ajaxurl,dataType:'json',quietMillis:250,data:function(term,page){return{q:term,action:'st_order_select',post_type:$('#item_type').val()}},results:function(data,page){return{results:data.items}},cache:!0},initSelection:function(element,callback){var id=$(element).val();if(id!==""){var data={id:id,name:$(element).data('pl-name'),description:$(element).data('pl-desc')};callback(data)}},formatResult:function(state){if(!state.id)return state.name;return state.name+'<p><em>'+state.description+'</em></p>'},formatSelection:function(state){if(!state.id)return state.name;return state.name+'<p><em>'+state.description+'</em></p>'},escapeMarkup:function(m){return m}});$('#item_id2').select2({minimumInputLength:2,ajax:{url:ajaxurl,dataType:'json',quietMillis:250,data:function(term,page){return{q:term,action:'st_order_select',post_type:get_post_type(),item_id:$('#item_id').val()}},results:function(data,page){return{results:data.items}},cache:!0},initSelection:function(element,callback){var id=$(element).val();if(id!==""){var data={id:id,name:$(element).data('pl-name'),description:$(element).data('pl-desc')};callback(data)}},formatResult:function(state){if(!state.id)return state.name;return state.name+'<p><em>'+state.description+'</em></p>'},formatSelection:function(state){if(!state.id)return state.name;return state.name+'<p><em>'+state.description+'</em></p>'},escapeMarkup:function(m){return m}});$('#item_id2').on('change',function(){});$('.st_delete_item').click(function(){var id=$(this).data('id');var me=$(this);if(id){if(confirm('Are you sure?')){$.ajax({dataType:'json',url:ajaxurl,data:{action:'st_delete_order_item',id:id},success:function(res){if(typeof res.message=="undefined"&&res.message){alert(res.message)}
if(res.reload)window.location.reload();on_ajax_load=!1;me.parents('tr').remove()},error:function(res){alert('Ajax Fail');console.log(res);on_ajax_load=!1}})}}})})